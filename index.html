<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Krypton Signatures</title>

	<!-- Meta Tags -->
	<meta name="description"
		content="Krypton email signatures collection. Right-click to copy images or use the provided URLs for your email signature.">
	<meta name="keywords" content="krypton, signatures, email, images, branding">
	<meta name="author" content="Krypton">

	<!-- Open Graph Meta Tags -->
	<meta property="og:title" content="Krypton Signatures">
	<meta property="og:description" content="Professional email signatures collection for Krypton brand">
	<meta property="og:type" content="website">
	<meta property="og:url" content="">
	<meta property="og:image" content="/assets/img_white.jpeg">

	<!-- Twitter Card Meta Tags -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Krypton Signatures">
	<meta name="twitter:description" content="Professional email signatures collection for Krypton brand">
	<meta name="twitter:image" content="/assets/img_white.jpeg">

	<!-- Favicon -->
	<link rel="icon" type="image/png" href="/assets/logo_bg.png">
	<style>
		body {
			font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
			margin: 0;
			padding: 2rem;
			background-color: #f6f8fa;
			color: #24292e;
		}

		main {
			max-width: 900px;
			margin: 0 auto;
		}

		h1 {
			border-bottom: 1px solid #e1e4e8;
			padding-bottom: 10px;
		}

		.image-entry {
			background-color: #fff;
			border: 1px solid #d1d5da;
			border-radius: 6px;
			margin-bottom: 20px;
			overflow: hidden;
		}

		.image-entry h3 {
			margin: 0;
			padding: 1rem;
			background-color: #f6f8fa;
			border-bottom: 1px solid #d1d5da;
		}

		.image-entry img {
			max-width: 100%;
			height: auto;
			display: block;
			box-sizing: border-box;
		}

		.image-entry code {
			display: block;
			padding: 1rem;
			background-color: #f6f8fa;
			border-top: 1px solid #e1e4e8;
			word-break: break-all;
		}
	</style>
</head>

<body>

	<main>
		<div
			style="display: flex; align-items: center; gap: 1rem; border-bottom: 1px solid #e1e4e8; padding-bottom: 10px;">
			<img src="/assets/logo_bg.png" alt="Krypton Logo" style="height: 40px;">
			<h1 style="margin: 0; border-bottom: none; padding-bottom: 0;">Krypton Signatures</h1>
		</div>

		<p>Right-click an image and "Copy Image" or copy its URL from below.</p>

		<!-- <div id="video-container">
			<p>* Watch this video to see how to set up your Krypton email signature.</p>
			<br>
			<video width="600" controls>
				<source src="https://mano29rs.github.io/resources/videos/krypton-signature-demo.mp4" type="video/mp4">
				Your browser does not support the video tag.
			</video>
		</div> -->

		<div id="signature-generator"
			style="background-color: #fff; border: 1px solid #d1d5da; border-radius: 6px; padding: 2rem; margin-bottom: 2rem;">
			<h2 style="margin-top: 0;">Generate Your Signature</h2>

			<div style="margin-bottom: 1rem;">
				<label for="name-input" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Name:</label>
				<input type="text" id="name-input" value="Your Name" placeholder="Your Name"
					style="width: 100%; padding: 0.5rem; border: 1px solid #d1d5da; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
			</div>

			<div style="margin-bottom: 1rem;">
				<label for="role-input" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Role:</label>
				<input type="text" id="role-input" value="Your Role" placeholder="Your Role"
					style="width: 100%; padding: 0.5rem; border: 1px solid #d1d5da; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
			</div>

			<div style="margin-bottom: 1rem;">
				<label for="email-input" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Email:</label>
				<input type="email" id="email-input" value="your.name@kryptonfilms.com"
					placeholder="your.email@kryptonfilms.com"
					style="width: 100%; padding: 0.5rem; border: 1px solid #d1d5da; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
			</div>

			<div style="margin-bottom: 1rem;">
				<label for="phone-input" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Phone:</label>
				<input type="text" id="phone-input" value="+351 999 999 999" placeholder="+351 999 999 999"
					style="width: 100%; padding: 0.5rem; border: 1px solid #d1d5da; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
				<small style="color: #586069; font-size: 12px;">Format: +351 999 999 999 or 999 999 999</small>
			</div>

			<div style="margin-bottom: 1rem;">
				<label style="display: flex; align-items: center; cursor: pointer;">
					<input type="checkbox" id="international-input"
						style="margin-right: 0.5rem; width: 18px; height: 18px; cursor: pointer;">
					<span style="font-weight: 600;">International</span>
				</label>
			</div>

			<button id="generate-btn"
				style="background-color: #d60703; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; margin-top: 1rem;">
				Generate Signature
			</button>
		</div>

		<div id="signature-preview"
			style="display: none; background-color: #fff; border: 1px solid #d1d5da; border-radius: 6px; padding: 2rem; margin-bottom: 2rem;">
			<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
				<h2 style="margin: 0;">Your Signature Preview</h2>
				<button id="copy-btn"
					style="background-color: #28a745; color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer;">
					Copy Signature
				</button>
			</div>
			<div id="signature-output"
				style="border: 1px solid #e1e4e8; padding: 1rem; background-color: #f6f8fa; border-radius: 6px;">
				<!-- Generated signature will appear here -->
			</div>
		</div>

		<div id="image-container">
			<p id="loading-message-images">Loading images from the repository...</p>
		</div>
	</main>

	<script>
		// Signature Generator
		const nameInput = document.getElementById('name-input');
		const roleInput = document.getElementById('role-input');
		const emailInput = document.getElementById('email-input');
		const phoneInput = document.getElementById('phone-input');
		const internationalInput = document.getElementById('international-input');
		const generateBtn = document.getElementById('generate-btn');
		const signaturePreview = document.getElementById('signature-preview');
		const signatureOutput = document.getElementById('signature-output');
		const copyBtn = document.getElementById('copy-btn');

		// Format phone number function
		function formatPhoneNumber(phone) {
			if (!phone || phone.trim() === '') {
				return '+351 912 253 136'; // Default
			}

			// Remove all spaces and non-digit characters except +
			let cleaned = phone.replace(/[^\d+]/g, '');

			// Check if it starts with a country code (+ followed by digits)
			const hasCountryCode = cleaned.startsWith('+');

			if (hasCountryCode) {
				// Try to extract country code - look for +XXX (3 digits) first, then +XX, +XXXX
				// Most common is 3 digits like +351, +001, etc.
				let countryCode = '';
				let remainingDigits = '';

				// Try matching +XXX (3 digits) - most common
				if (cleaned.match(/^\+\d{3}/)) {
					countryCode = cleaned.substring(0, 4); // + plus 3 digits
					remainingDigits = cleaned.substring(4);
				}
				// Try matching +XX (2 digits)
				else if (cleaned.match(/^\+\d{2}/)) {
					countryCode = cleaned.substring(0, 3); // + plus 2 digits
					remainingDigits = cleaned.substring(3);
				}
				// Try matching +X (1 digit) like +1
				else if (cleaned.match(/^\+\d{1}/)) {
					countryCode = cleaned.substring(0, 2); // + plus 1 digit
					remainingDigits = cleaned.substring(2);
				}
				// Try matching +XXXX (4 digits)
				else if (cleaned.match(/^\+\d{4}/)) {
					countryCode = cleaned.substring(0, 5); // + plus 4 digits
					remainingDigits = cleaned.substring(5);
				}

				// Format the remaining digits in groups of 3
				if (remainingDigits.length > 0) {
					const formatted = remainingDigits.match(/.{1,3}/g)?.join(' ') || remainingDigits;
					return `${countryCode} ${formatted}`;
				}
				return countryCode;
			} else {
				// No country code, just format digits in groups of 3
				const digits = cleaned.replace(/\D/g, '');
				if (digits.length > 0) {
					const formatted = digits.match(/.{1,3}/g)?.join(' ') || digits;
					return formatted;
				}
			}

			return phone; // Return original if formatting fails
		}

		function generateSignature() {
			const name = nameInput.value || 'Your Name';
			const role = roleInput.value.toUpperCase() || 'Your Role';
			const email = emailInput.value || 'your.email@kryptonfilms.com';
			const phone = formatPhoneNumber(phoneInput.value || '+351 912 253 136');
			const isInternational = internationalInput.checked;

			const kryptonImage = isInternational
				? 'https://mano29rs.github.io/resources/images/kryptonINT.gif'
				: 'https://mano29rs.github.io/resources/images/krypton1.GIF';

			const signature = `
				<div dir="ltr" style="font-size: 19px;">
					<div style="font-family: Helvetica; font-size: 12px;">
						<font face="AvenirNext-Regular">
							<b>${name}</b><br>
							<span style="font-size: 9px;">${role}</span><br><br>
							<a href="mailto:${email}">${email}</a><br>
							<span>${phone}</span><br><br>
							<span>Rua da Junqueira, nº 354</span><br>
							<span>1300-340 Lisboa</span><br>
							<span>+351 21 360 07 50</span><br>
							<a href="http://www.kryptonfilms.com/">www.kryptonfilms.com</a><br><br>
						</font>
						<img src="${kryptonImage}" alt="krypton logo"><br>
						<img src="https://mano29rs.github.io/resources/images/best_krypt.gif" alt="best_krypt.gif"><br><br>
					</div>
					<font color="#afafaf" face="AvenirNext-Italic" style="font-size: 9px;">
						<i>
							Esta mensagem e documentos eventualmente em anexo destinam-se exclusivamente às pessoas nela
							indicadas como
							destinatários e contêm matéria confidencial e legalmente protegida, pelo que se informa que o uso
							não autorizado da
							mesma é proibido por lei. Se receber esta mensagem por engano, ou não for o destinatário pretendido
							pelo remetente,
							agradecemos contacto por email ou por telefone e eliminação da mensagem e anexos, sem reprodução ou
							transmissão a
							quaisquer terceiros. Opiniões, conclusões ou qualquer outra informação expressas nesta mensagem que
							não se relacionem
							com o negócio da Krypton – Produção de Ideias para a Comunicação, Lda. devem ser entendidas como
							nunca tendo sido dadas
							ou endossadas pela mesma.
						</i>
					</font>
				</div>
			`;

			signatureOutput.innerHTML = signature;
			signaturePreview.style.display = 'block';
			signaturePreview.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
		}

		generateBtn.addEventListener('click', generateSignature);

		copyBtn.addEventListener('click', () => {
			const signatureHTML = signatureOutput.innerHTML;

			// Create a temporary element to copy the HTML
			const tempDiv = document.createElement('div');
			tempDiv.innerHTML = signatureHTML;
			document.body.appendChild(tempDiv);

			// Select the content
			const range = document.createRange();
			range.selectNodeContents(tempDiv);
			const selection = window.getSelection();
			selection.removeAllRanges();
			selection.addRange(range);

			try {
				// Copy to clipboard
				document.execCommand('copy');

				// Visual feedback
				const originalText = copyBtn.textContent;
				copyBtn.textContent = 'Copied!';
				copyBtn.style.backgroundColor = '#28a745';

				setTimeout(() => {
					copyBtn.textContent = originalText;
					copyBtn.style.backgroundColor = '#28a745';
				}, 2000);
			} catch (err) {
				console.error('Failed to copy:', err);
				alert('Failed to copy signature. Please select and copy manually.');
			} finally {
				// Clean up
				document.body.removeChild(tempDiv);
				selection.removeAllRanges();
			}
		});

		// GitHub Images Loading
		const USERNAME = "Mano29rs";
		const REPO_NAME = "resources";

		const FOLDER_PATH = "images";
		const apiURL = `https://api.github.com/repos/${USERNAME}/${REPO_NAME}/contents/${FOLDER_PATH}`;
		const imageBaseURL = `https://${USERNAME}.github.io/${REPO_NAME}/${FOLDER_PATH}/`;

		const container = document.getElementById('image-container');
		const loadingMessage = document.getElementById('loading-message-images');

		fetch(apiURL)
			.then(response => {
				if (!response.ok) {
					throw new Error(`Failed to fetch repository contents: ${response.statusText}`);
				}
				return response.json();
			})
			.then(files => {
				loadingMessage.style.display = 'none';

				if (!Array.isArray(files)) {
					container.innerHTML = `<p>Error: The folder '${FOLDER_PATH}' was not found or is empty.</p>`;
					console.error("Response was not an array:", files);
					return;
				}

				const imageFiles = files.filter(file => {
					const fileName = file.name.toLowerCase();
					return file.type === 'file' &&
						(fileName.endsWith('.png') ||
							fileName.endsWith('.jpg') ||
							fileName.endsWith('.jpeg') ||
							fileName.endsWith('.gif') ||
							fileName.endsWith('.svg'));
				});

				if (imageFiles.length === 0) {
					container.innerHTML = `<p>No images found in the '${FOLDER_PATH}' folder.</p>`;
					return;
				}

				imageFiles.forEach(file => {
					const fileURL = imageBaseURL + file.name;

					const entryDiv = document.createElement('div');
					entryDiv.className = 'image-entry';

					const title = document.createElement('h3');
					title.textContent = file.name;

					const img = document.createElement('img');
					img.src = fileURL;
					img.alt = file.name;

					const code = document.createElement('code');
					code.textContent = fileURL;

					entryDiv.appendChild(title);
					entryDiv.appendChild(img);
					entryDiv.appendChild(code);
					container.appendChild(entryDiv);
				});
			})
			.catch(error => {
				console.error(error);
				loadingMessage.textContent = `Error: ${error.message}. Check your console and make sure the USERNAME and REPO_NAME are correct.`;
			});
	</script>
</body>

</html>